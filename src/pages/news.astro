---
import Layout from '../layouts/Layout.astro';

import Header from "../components/Header.svelte";
import Footer from "../components/Footer.astro";
import NewsPage from "../components/NewsPage.astro"

import { Icon, Newspaper } from "svelte-hero-icons";

let allPosts = await Astro.glob('./news/p-*.md');
allPosts.reverse()

import "../app.css"
---

<Layout title="新闻通知 - 东南大学开源镜像站 / SEU Mirrors">
    <Header client:only="svelte"/>
    <div class="caddy-wrapper flex flex-wrap bg-white text-neutral-900 gap-0 lg:divide-x max-lg:divide-y caddy-main grow">
        <div class="px-4 py-3 flex flex-col w-full">
            <p class="font-medium text-xl flex items-center">
                <Icon class="w-6 h-6 mr-2" src={Newspaper} solid />
                新闻通知
            </p>

            <table class="mt-3 table-fixed text-left">
                <colgroup>
                    <col class="w-1/3" />
                    <col class="w-1/3" />
                    <col class="w-1/6" />
                    <col class="w-1/6" />
                </colgroup>
                <thead>
                    <tr class="row" style="font-weight: bold; font-size: large">
                        <th>标题</th>
                        <th>摘要</th>
                        <th>日期</th>
                        <th>作者</th>
                    </tr>
                </thead>
                <tbody>
                    {allPosts.map((post) => <NewsPage url={post.url} title={post.frontmatter.title} description={post.frontmatter.description} pubdate={post.frontmatter.pubDate} author={post.frontmatter.author} />)}
                </tbody>
            </table>


        </div>
    </div>
    <Footer/>
</Layout>